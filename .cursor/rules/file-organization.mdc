---
alwaysApply: true
description: File organization and directory structure patterns
---

# File Organization Patterns

This project follows a comprehensive file organization structure optimized for scalability:

## ğŸ“ Root Directory Structure

### **Core Directories:**
```
src/
â”œâ”€â”€ app/           # Next.js App Router pages and API routes
â”œâ”€â”€ components/    # React components organized by feature
â”œâ”€â”€ lib/           # Utility functions and shared logic
â”œâ”€â”€ hooks/         # Custom React hooks
â”œâ”€â”€ types/         # TypeScript type definitions
â”œâ”€â”€ utils/         # Helper functions and utilities
â”œâ”€â”€ config/        # Configuration files
â”œâ”€â”€ constants/     # Application constants
â”œâ”€â”€ styles/        # Global styles and CSS modules
â””â”€â”€ payload/       # PayloadCMS configuration and collections
```

### **Supporting Directories:**
```
â”œâ”€â”€ __tests__/     # Unit and integration tests
â”œâ”€â”€ __mocks__/     # Test mocks and fixtures
â”œâ”€â”€ stories/       # Storybook stories
â”œâ”€â”€ test-utils/    # Testing utilities
â””â”€â”€ tools/         # Development tools and scripts
```

## ğŸ¯ Directory-Specific Patterns

### **App Router Structure:**
```
src/app/
â”œâ”€â”€ (auth)/        # Route groups for auth pages
â”œâ”€â”€ (dashboard)/   # Route groups for dashboard pages
â”œâ”€â”€ api/           # API routes organized by domain
â”‚   â”œâ”€â”€ auth/      # Authentication endpoints
â”‚   â”œâ”€â”€ content/   # Content management APIs
â”‚   â”œâ”€â”€ crm/       # CRM-related APIs
â”‚   â””â”€â”€ commerce/  # E-commerce APIs
â”œâ”€â”€ admin/         # Admin interface pages
â”œâ”€â”€ blog/          # Blog pages and routes
â””â”€â”€ globals.css    # Global styles
```

### **Component Organization:**
```
src/components/
â”œâ”€â”€ ui/            # Base UI components (shadcn/ui)
â”œâ”€â”€ features/      # Feature-specific components
â”‚   â”œâ”€â”€ auth/      # Authentication components
â”‚   â”œâ”€â”€ products/  # Product-related components
â”‚   â””â”€â”€ dashboard/ # Dashboard widgets
â”œâ”€â”€ layout/        # Layout components
â”œâ”€â”€ forms/         # Form components
â””â”€â”€ shared/        # Shared/reusable components
```

### **PayloadCMS Structure:**
```
src/payload/
â”œâ”€â”€ collections/   # Database collections
â”‚   â”œâ”€â”€ builder/   # Visual page builder collections
â”‚   â”œâ”€â”€ commerce/  # E-commerce collections
â”‚   â”œâ”€â”€ crm/       # Customer management collections
â”‚   â”œâ”€â”€ content/   # Content management collections
â”‚   â””â”€â”€ staff/     # Staff management collections
â”œâ”€â”€ components/    # Admin interface components
â”œâ”€â”€ hooks/         # Payload-specific hooks
â”œâ”€â”€ endpoints/     # Custom API endpoints
â””â”€â”€ utils/         # Payload utilities
```

## ğŸ“‹ File Naming Conventions

### **Component Files:**
```typescript
// Main component
ComponentName.tsx

// Component with multiple parts
ComponentName/
â”œâ”€â”€ index.tsx      # Main export
â”œâ”€â”€ ComponentName.tsx
â”œâ”€â”€ SubComponent.tsx
â””â”€â”€ types.ts       # Component-specific types
```

### **API Routes:**
```typescript
// Standard CRUD
route.ts           # GET, POST
[id]/route.ts      # GET, PUT, DELETE by ID

// Special operations
search/route.ts    # Search functionality
analytics/route.ts # Analytics endpoints
bulk/route.ts      # Bulk operations
```

### **Utility Files:**
```typescript
// Functions
utils.ts
helpers.ts
formatters.ts

// Constants
constants.ts
config.ts

// Types
types.ts
interfaces.ts
enums.ts
```

## ğŸ”§ Import Patterns

### **Relative Imports:**
```typescript
// Same directory
import { utils } from './utils'
import { types } from './types'

// Parent directory
import { config } from '../config'
import { Component } from '../components'

// Sibling directories
import { api } from '../../lib/api'
import { useAuth } from '../../hooks/useAuth'
```

### **Absolute Imports (Recommended):**
```typescript
// Using @ alias (configured in tsconfig.json)
import { Button } from '@/components/ui/button'
import { api } from '@/lib/api'
import { useAuth } from '@/hooks/useAuth'
import { User } from '@/types/user'

// Direct imports
import { createClient } from '@/lib/supabase'
import { formatDate } from '@/utils/date'
```

### **Index Files:**
```typescript
// src/components/ui/index.ts
export { Button } from './button'
export { Input } from './input'
export { Card } from './card'

// Usage
import { Button, Input, Card } from '@/components/ui'
```

## ğŸ¯ File Organization Best Practices

### **Single Responsibility:**
```typescript
// âœ… Good: One component per file
Button.tsx
Input.tsx
Card.tsx

// âŒ Bad: Multiple components in one file
components.tsx // Contains Button, Input, Card
```

### **Cohesion:**
```typescript
// âœ… Good: Related files together
components/
â”œâ”€â”€ Button/
â”‚   â”œâ”€â”€ Button.tsx
â”‚   â”œâ”€â”€ Button.stories.tsx
â”‚   â””â”€â”€ Button.test.tsx

// âŒ Bad: Scattered related files
Button.tsx
Button.stories.tsx (in stories/)
Button.test.tsx (in __tests__/)
```

### **Size Limits:**
```typescript
// Keep files under 300 lines
// Split large components into smaller pieces
// Extract utilities into separate files
// Use index files for clean imports
```

## ğŸ” File Discovery Patterns

### **Finding Components:**
```bash
# Find all button components
find src -name "*button*" -type f

# Find components by feature
find src/components -path "*/auth/*" -name "*.tsx"

# Find API routes
find src/app/api -name "route.ts"
```

### **Import Resolution:**
```typescript
// Quick file location
// Ctrl+Click (VS Code) or Cmd+Click (Cursor)
// Go to Definition (F12)
// Find All References (Shift+F12)
```

## ğŸš€ Development Workflow

### **New Feature Structure:**
```typescript
# 1. Create feature directory
mkdir src/components/features/new-feature

# 2. Add component files
touch src/components/features/new-feature/
  NewFeature.tsx
  NewFeature.test.tsx
  NewFeature.stories.tsx
  index.ts

# 3. Add types
touch src/types/new-feature.ts

# 4. Add API routes
mkdir src/app/api/new-feature
touch src/app/api/new-feature/route.ts

# 5. Add hooks
touch src/hooks/useNewFeature.ts

# 6. Add utilities
touch src/utils/new-feature-utils.ts
```

### **File Templates:**

#### **Component Template:**
```typescript
// src/components/ComponentName.tsx
import React from 'react'
import { cn } from '@/lib/utils'

interface ComponentNameProps {
  children?: React.ReactNode
  className?: string
}

export function ComponentName({ children, className }: ComponentNameProps) {
  return (
    <div className={cn('component-classes', className)}>
      {children}
    </div>
  )
}
```

#### **Hook Template:**
```typescript
// src/hooks/useCustomHook.ts
import { useState, useEffect } from 'react'

export function useCustomHook(initialValue: any) {
  const [value, setValue] = useState(initialValue)

  useEffect(() => {
    // Side effects
  }, [])

  return { value, setValue }
}
```

#### **API Route Template:**
```typescript
// src/app/api/resource/route.ts
import { NextRequest, NextResponse } from 'next/server'
import { createSuccessResponse, createErrorResponse } from '@/lib/api-error-handler'

export async function GET(request: NextRequest) {
  try {
    // Implementation
    return createSuccessResponse(data, 'Success')
  } catch (error) {
    return createErrorResponse('Error', 'ERROR_CODE', 500)
  }
}

export async function POST(request: NextRequest) {
  try {
    // Implementation
    return createSuccessResponse(data, 'Created', 201)
  } catch (error) {
    return createErrorResponse('Error', 'ERROR_CODE', 500)
  }
}
```

## ğŸ”§ Configuration Files

### **TypeScript Config:**
```json
// tsconfig.json
{
  "compilerOptions": {
    "baseUrl": ".",
    "paths": {
      "@/*": ["./src/*"]
    }
  }
}
```

### **Next.js Config:**
```javascript
// next.config.js
module.exports = {
  experimental: {
    appDir: true,
  },
  images: {
    domains: ['localhost'],
  },
}
```

### **Tailwind Config:**
```javascript
// tailwind.config.js
module.exports = {
  content: ['./src/**/*.{js,ts,jsx,tsx}'],
  theme: {
    extend: {},
  },
}
```

## ğŸ¯ Quick Reference

### **Common File Locations:**
```typescript
// Main app component
src/app/page.tsx

// Layout components
src/components/layout/

// API routes
src/app/api/

// Custom hooks
src/hooks/

// Utility functions
src/lib/utils.ts

// Type definitions
src/types/

// Configuration
src/config/
```

### **Import Shortcuts:**
```typescript
// @/ alias points to src/
import { Component } from '@/components/Component'
import { api } from '@/lib/api'
import { useAuth } from '@/hooks/useAuth'
import { User } from '@/types/user'
```

### **File Extensions:**
```typescript
// React components
.tsx

// TypeScript files
.ts

// JavaScript files
.js

// CSS modules
.module.css

// Global styles
.css
```